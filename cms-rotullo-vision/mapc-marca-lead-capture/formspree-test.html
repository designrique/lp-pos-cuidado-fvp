<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Formspree - MAPC</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin-top: 20px; padding: 15px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #e2f3ff; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>üß™ Teste Formspree - MAPC</h1>
    <p><strong>URL:</strong> https://formspree.io/f/xrbyzrog</p>
    
    <form id="testForm">
        <div class="form-group">
            <label for="nome">Nome:</label>
            <input type="text" id="nome" name="nome" value="Teste Jo√£o Silva" required>
        </div>
        
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" value="teste@exemplo.com" required>
        </div>
        
        <div class="form-group">
            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" name="telefone" value="5581999887766">
        </div>
        
        <div class="form-group">
            <label for="empresa">Empresa:</label>
            <input type="text" id="empresa" name="empresa" value="Empresa Teste Ltda">
        </div>
        
        <div class="form-group">
            <label for="servico">Servi√ßo:</label>
            <select id="servico" name="servico">
                <option value="Registro de Marca">Registro de Marca</option>
                <option value="Marca Internacional">Marca Internacional</option>
                <option value="Registro de Patente">Registro de Patente</option>
                <option value="Registro de Software">Registro de Software</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="mensagem">Mensagem:</label>
            <textarea id="mensagem" name="mensagem" rows="3">Teste de integra√ß√£o via landing page</textarea>
        </div>
        
        <button type="button" onclick="testFormspree()">üöÄ Testar Envio</button>
    </form>
    
    <div id="result"></div>

    <script>
        async function testFormspree() {
            const result = document.getElementById('result');
            result.innerHTML = '<div class="info">Enviando... ‚è≥</div>';
            
            try {
                const formData = {
                    nome: document.getElementById('nome').value,
                    email: document.getElementById('email').value,
                    telefone: document.getElementById('telefone').value,
                    empresa: document.getElementById('empresa').value,
                    servico: document.getElementById('servico').value,
                    mensagem: document.getElementById('mensagem').value,
                    origem: 'Teste Landing Page MAPC',
                    timestamp: new Date().toLocaleString('pt-BR'),
                    _subject: `Teste Lead MAPC - ${document.getElementById('nome').value}`,
                    _replyto: document.getElementById('email').value
                };
                
                console.log('Dados enviados:', formData);
                
                const response = await fetch('https://formspree.io/f/xrbyzrog', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                console.log('Status da resposta:', response.status);
                console.log('Headers da resposta:', [...response.headers.entries()]);
                
                const responseText = await response.text();
                console.log('Corpo da resposta:', responseText);
                
                if (response.ok) {
                    result.innerHTML = `
                        <div class="success">
                            ‚úÖ <strong>SUCESSO!</strong><br>
                            Status: ${response.status}<br>
                            O lead foi enviado com sucesso para o Formspree!<br>
                            Verifique seu email para confirma√ß√£o.
                        </div>
                    `;
                } else {
                    result.innerHTML = `
                        <div class="error">
                            ‚ùå <strong>ERRO:</strong><br>
                            Status: ${response.status}<br>
                            Resposta: ${responseText}
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('Erro:', error);
                result.innerHTML = `
                    <div class="error">
                        ‚ùå <strong>ERRO DE REDE:</strong><br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        // Fun√ß√£o para testar m√©todo HTML tradicional
        function testHTMLForm() {
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = 'https://formspree.io/f/xrbyzrog';
            form.target = '_blank';
            
            const fields = ['nome', 'email', 'telefone', 'empresa', 'servico', 'mensagem'];
            fields.forEach(field => {
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = field;
                input.value = document.getElementById(field).value;
                form.appendChild(input);
            });
            
            document.body.appendChild(form);
            form.submit();
            document.body.removeChild(form);
        }
    </script>
    
    <hr>
    <h2>üìã Instru√ß√µes de Teste:</h2>
    <ol>
        <li><strong>Teste JavaScript (Fetch):</strong> Clique no bot√£o "Testar Envio" acima</li>
        <li><strong>Teste HTML Tradicional:</strong> <button onclick="testHTMLForm()">Teste Formul√°rio HTML</button></li>
        <li><strong>Verifique Console:</strong> Abra o DevTools (F12) para ver logs detalhados</li>
        <li><strong>Verifique Email:</strong> O Formspree deve enviar confirma√ß√£o</li>
    </ol>
    
    <h3>üîç Diagn√≥stico:</h3>
    <p><strong>Se der erro "Form should POST":</strong></p>
    <ul>
        <li>Verifique se o m√©todo est√° correto (POST)</li>
        <li>Verifique se o Content-Type est√° application/json</li>
        <li>Verifique se o endpoint est√° correto</li>
        <li>Tente o formul√°rio HTML tradicional como alternativa</li>
    </ul>
    
    <p><strong>URL do Dashboard:</strong> <a href="https://formspree.io/forms/xrbyzrog" target="_blank">Ver Submiss√µes</a></p>
</body>
</html>